{$layout}
{$template "menu"}

<div class="left-right-box-container">
    {$template "/left_menu"}

    <div class="right-box">
        <form method="post" class="ui form" data-tea-action="$" data-tea-success="success">
            <input type="hidden" name="clusterId" :value="cluster.id"/>
            <table class="ui table selectable definition">
                <tr>
                    <td class="title">ÈõÜÁæ§ÂêçÁß∞ *</td>
                    <td><input type="text" name="name" maxlength="50" ref="focus" v-model="cluster.name"/></td>
                </tr>
                <tr v-if="cluster.domainName.length > 0">
                    <td>ÂüüÂêç</td>
                    <td>
                        {{cluster.domainName}}<link-icon :href="'/clusters/cluster/settings/dns?clusterId=' + cluster.id"></link-icon>
                    </td>
                </tr>
                <tr>
                    <td>ÈªòËÆ§SSHËÆ§ËØÅ</td>
                    <td>
                        <grant-selector :v-grant="grant"></grant-selector>
                        <p class="comment">ÂΩìËäÇÁÇπÊ≤°ÊúâÂçïÁã¨ËÆæÁΩÆSSHËÆ§ËØÅÊó∂ÔºåÈªòËÆ§‰ΩøÁî®Ê≠§ËÆæÁΩÆ„Ä?/p>
                    </td>
                </tr>
                <tr>
                    <td>ÈªòËÆ§SSHÁ´ØÂè£</td>
                    <td>
                        <input type="text" name="sshParamsPort" v-model="cluster.sshParams.port" maxlength="5" style="width: 5em"/>
                        <p class="comment">ËäÇÁÇπÈªòËÆ§SSHÁôªÂΩïÁ´ØÂè£„Ä?/p>
                    </td>
                </tr>
                <tr>
                    <td>ËäÇÁÇπÂÆâË£ÖÁõÆÂΩï</td>
                    <td>
                        <input type="text" name="installDir" maxlength="100" v-model="cluster.installDir"/>
                        <p class="comment">ÂΩìËäÇÁÇπÊ≤°ÊúâÂçïÁã¨ËÆæÁΩÆÂÆâË£ÖÁõÆÂΩïÊó∂ÔºåÈªòËÆ§‰ΩøÁî®Ê≠§ËÆæÁΩÆ„ÄÇÂ¶ÇÊûúÈõÜÁæ§ÂíåËäÇÁÇπÈÉΩÊ≤°ÊúâËÆæÁΩÆÂÆâË£ÖÁõÆÂΩïÔºåÂàô‰ΩøÁî?span class="ui label tiny">$ÁôªÂΩïÁî®Êà∑HOMEË∑ØÂæÑ/ling-node</span> ÁõÆÂΩï„Ä?/p>
                    </td>
                </tr>
                <tr>
                    <td colspan="2"><more-options-indicator></more-options-indicator></td>
                </tr>
                <tbody v-show="moreOptionsVisible">
                    <tr>
                        <td>Êó∂Âå∫</td>
                        <td>
                            <div class="ui fields inline">
                                <div class="ui field">
                                    <b-select
                                        v-model="timeZoneGroupCode"
                                        :options="[
                                            ...timeZoneGroups.map(timeZoneGroup => ({
                                                label: timeZoneGroup.name,
                                                value: timeZoneGroup.code,
                                            }))
                                        ]"
                                    ></b-select>

                                    <!-- <select class="ui dropdown" v-model="timeZoneGroupCode">
                                        <option v-for="timeZoneGroup in timeZoneGroups" :value="timeZoneGroup.code">{{timeZoneGroup.name}}</option>
                                    </select> -->
                                </div>
                                <div class="ui field">
                                    <b-select
                                        name="timeZone"
                                        v-model="cluster.timeZone"
                                        :options="[
                                            ...timeZoneLocation.group == timeZoneGroupCode ? timeZoneLocations.map(timeZoneLocation => ({
                                                label: timeZoneLocation.name + 'Ôº? + timeZoneLocation.offset + 'Ôº?,
                                                value: timeZoneLocation.name,
                                            })):[],
                                        ]"
                                    ></b-select>

                                    <!-- <select class="ui dropdown" name="timeZone" v-model="cluster.timeZone">
                                        <option v-for="timeZoneLocation in timeZoneLocations" :value="timeZoneLocation.name" v-if="timeZoneLocation.group == timeZoneGroupCode">{{timeZoneLocation.name}} ({{timeZoneLocation.offset}})</option>
                                    </select> -->
                                </div>
                            </div>
                            <p class="comment">ËäÇÁÇπËÆ∞ÂΩïÊó•Âøó‰ΩøÁî®ÁöÑÊó∂Âå∫„Ä?/p>
                        </td>
                    </tr>
                    <tr>
                        <td>ÂçïËäÇÁÇπÊúÄÂ§ßÁ∫øÁ®ãÊï∞</td>
                        <td>
                            <input type="text" name="nodeMaxThreads" maxlength="6" v-model="cluster.nodeMaxThreads"/>
                            <p class="comment">ÂèñÂÄºÂú®{{defaultNodeMaxThreadsMin}}Âíå{{defaultNodeMaxThreadsMax}}‰πãÈó¥ÔºõÂ¶ÇÊûú‰∏∫0ÔºåÂàôÈªòËÆ§‰∏∫{{defaultNodeMaxThreads}}„Ä?/p>
                        </td>
                    </tr>
                    <tr>
                        <td>Ëá™Âä®ÂºÄÊîæÁ´ØÂè?/td>
                        <td>
                            <checkbox name="autoOpenPorts" :v-value="1" v-model="cluster.autoOpenPorts"></checkbox>
                            <p class="comment">ÈÄâ‰∏≠Âêé‰ºöËá™Âä®Â∞ùËØïÂú®ËæπÁºòËäÇÁÇπÊ≠£Âú®ËøêË°åÁöÑfirewalld‰∏≠ÂºÄÊîæÊâÄÈúÄÁ´ØÂè£ÔºõÂ¶ÇÊûúÊúâÂà´ÁöÑÈò≤ÁÅ´Â¢ôÊàñËÄÖÂÆâÂÖ®Á≠ñÁï•Ôºå‰ªçÁÑ∂ÈúÄË¶ÅÊâãÂ∑•Êìç‰Ωú„Ä?/p>
                        </td>
                    </tr>
                    <tr>
                        <td class="color-border">Ëá™Âä®ÂêåÊ≠•ËäÇÁÇπÊó∂Èíü</td>
                        <td>
                            <div class="ui fields inline">
                                <div class="ui field">
                                    <checkbox name="clockAutoSync" :v-value="1" v-model="cluster.clock.autoSync"></checkbox>
                                </div>
                            </div>
                            <p class="comment">ÈÄâ‰∏≠ÂêéË°®Á§∫Â∞ùËØïËá™Âä®ÂêåÊ≠•ËäÇÁÇπÊó∂Èíü„Ä?/p>
                        </td>
                    </tr>
                    <tr v-show="cluster.clock.autoSync">
                        <td class="color-border">NTPÊó∂ÈíüÊúçÂä°Âô?/td>
                        <td>
                            <input type="text" name="clockServer" v-model="cluster.clock.server" maxlength="100"/>
                            <p class="comment">ÂèØÈÄâÈ°π„ÄÇÈªòËÆ§‰ΩøÁî?code-label>pool.ntp.org</code-label>„Ä?/p>
                        </td>
                    </tr>
                    <tr v-show="cluster.clock.autoSync">
                        <td class="color-border">Ê£ÄÊü•Chrony</td>
                        <td>
                            <checkbox name="clockCheckChrony" :v-value="1" v-model="cluster.clock.checkChrony"></checkbox>
                            <p class="comment">ÈÄâ‰∏≠ÂêéÔºåË°®Á§∫Â¶ÇÊûúchronyÔºàÂè¶‰∏ÄÊ¨æÊó∂Èó¥ÂêåÊ≠•ËΩØ‰ª∂ÔºâÊ≠£Âú®ËøêË°åÔºåÂàô‰∏çÈáçÂ§çÊâßË°åÊó∂Èó¥ÂêåÊ≠•„Ä?/p>
                        </td>
                    </tr>
                    <tr>
                        <td>Ëá™Âä®ËøúÁ®ãÂêØÂä®</td>
                        <td>
                            <checkbox name="autoRemoteStart" :v-value="1" v-model="cluster.autoRemoteStart"></checkbox>
                            <p class="comment">ÂΩìÊ£ÄÊµãÂà∞ËäÇÁÇπÁ¶ªÁ∫øÊó∂ÔºåËá™Âä®Â∞ùËØïËøúÁ®ãÂêØÂä®ÔºàÂâçÊèêÊòØËäÇÁÇπÂ∑≤ÁªèËÆæÁΩÆ‰∫ÜSSHÁôªÂΩïËÆ§ËØÅÔºâ„Ä?/p>
                        </td>
                    </tr>
                    <tr>
                        <td>Ëá™Âä®ÂÆâË£Önftables</td>
                        <td>
                            <checkbox name="autoInstallNftables" :v-value="1" v-model="cluster.autoInstallNftables"></checkbox>
                            <p class="comment">ÈÄâ‰∏≠ÂêéÔºåË°®Á§∫Âú®LinuxÁ≥ªÁªü‰∏≠Ëá™Âä®Â∞ùËØïÂÆâË£?code-label>nftables</code-label>Áî®‰∫éÂÆâÂÖ®Èò≤Âæ°ÔºõÊ≠§ÂäüËÉΩÈúÄË¶ÅËÅîÁΩë‰ªéUbuntu„ÄÅCentOSÁ≠âËΩØ‰ª∂Â∫ì‰∏≠‰∏ãËΩΩÂÆâË£ÖÂåÖ„Ä?/p>
                        </td>
                    </tr>
                    <tr>
                        <td>Ëá™Âä®Ë∞ÉËäÇÁ≥ªÁªüÂèÇÊï∞</td>
                        <td>
                            <checkbox name="autoSystemTuning" :v-value="1" v-model="cluster.autoSystemTuning"></checkbox>
                            <p class="comment">ÈÄâ‰∏≠ÂêéÔºåË°®Á§∫Ëá™Âä®Ë∞ÉÊï¥LinuxÂÜÖÊ†∏Á≠âÂèÇÊï∞Ôºå‰ª•‰æøÊèêÂçáÊÄßËÉΩÔºõÂêØÁî®ÂêéÔºå‰ª•ÂæÄÂÆâË£ÖÁöÑËæπÁºòËäÇÁÇπÈúÄË¶ÅÈáçÂêØËøõÁ®ãÂêéÊâçËÉΩÁîüÊïà„Ä?/p>
                        </td>
                    </tr>
                    <tr>
                        <td>Ëá™Âä®ÊâßË°åÁ°¨Áõò<br/>TRIM</td>
                        <td>
                            <checkbox name="autoTrimDisks" :v-value="1" v-model="cluster.autoTrimDisks"></checkbox>
                            <p class="comment">ÊâßË°åTRIMÂêéÂèØ‰ª•ÁßªÈô§SSDÁ°¨Áõò‰∏≠Êó†ÊïàÁöÑÊï∞ÊçÆÔºå‰ªéËÄåÊòæËëóÊèêÂçáSSDÁ°¨ÁõòÂÜôÂÖ•ÊÄßËÉΩ„Ä?/p>
                        </td>
                    </tr>
                    <tr>
                        <td>ËäÇÁÇπI/OÊúÄÂ§ßËØªÂπ∂ÂèëÊï?/td>
                        <td>
                            <input name="maxConcurrentReads" v-model="cluster.maxConcurrentReads" type="text" style="width: 5em" maxlength="4"/>
                            <p class="comment">0Ë°®Á§∫Ê†πÊçÆÁ≥ªÁªüËµÑÊ∫êËá™Âä®ËÆ°ÁÆóÔºõÈÄöÂ∏∏‰∏çÈúÄË¶Å‰øÆÊîπÔºåËØ∑Âú®‰∏ì‰∏ö‰∫∫Â£´ÊåáÂØº‰∏ãÊìç‰Ωú„Ä?/p>
                        </td>
                    </tr>
                    <tr>
                        <td>ËäÇÁÇπI/OÊúÄÂ§ßÂÜôÂπ∂ÂèëÊï?/td>
                        <td>
                            <input name="maxConcurrentWrites" v-model="cluster.maxConcurrentWrites" type="text" style="width: 5em" maxlength="4"/>
                            <p class="comment">0Ë°®Á§∫Ê†πÊçÆÁ≥ªÁªüËµÑÊ∫êËá™Âä®ËÆ°ÁÆóÔºõÈÄöÂ∏∏‰∏çÈúÄË¶Å‰øÆÊîπÔºåËØ∑Âú®‰∏ì‰∏ö‰∫∫Â£´ÊåáÂØº‰∏ãÊìç‰Ωú„Ä?/p>
                        </td>
                    </tr>
                </tbody>
            </table>
            <submit-btn></submit-btn>
        </form>
    </div>
</div>
