{$layout}

<form class="space-y-4" method="post" data-tea-action="$" data-tea-success="success">
	<csrf-token></csrf-token>

	<h3>基本设置</h3>
	<table class="w-full border-collapse bg-white shadow-sm rounded-lg overflow-hidden">
		<tr>
			<td class="title">产品名称 *</td>
			<td>
				<input type="text" name="productName" v-model="config.productName" maxlength="100"/>
                <p class="text-sm text-gray-500">可以使用变量<code-label>${product.name}</code-label>在用户端网页里展示此名称。</p>
			</td>
		</tr>
		<tr>
			<td>用户系统名称 *</td>
			<td>
				<input type="text" name="userSystemName" v-model="config.userSystemName" maxlength="100"/>
                <p class="text-sm text-gray-500">用户端界面上显示的系统名称。</p>
			</td>
		</tr>
		<tr>
			<td>是否显示版本号</td>
			<td>
				<checkbox name="showVersion" v-model="config.showVersion"></checkbox>
                <p class="text-sm text-gray-500">选中后，在用户端界面中显示系统版本号。</p>
			</td>
		</tr>
		<tr>
			<td>定制版本号</td>
			<td>
				<input type="text" name="version" v-model="config.version" maxlength="100"/>
				<p class="text-sm text-gray-500">定制自己的版本号，留空表示使用系统自带的版本号。</p>
			</td>
		</tr>
        <tr>
            <td>是否显示财务相关功能</td>
            <td>
                <checkbox name="showFinance" v-model="config.showFinance"></checkbox>
                <p class="text-sm text-gray-500">在用户端是否显示套餐、账单等财务相关功能。</p>
            </td>
        </tr>
        <tr>
            <td>页脚设置</td>
            <td>
                <checkbox name="showPageFooter" v-model="config.showPageFooter">显示页脚</checkbox>
                <p class="text-sm text-gray-500">是否在用户端页面底部显示页脚信息。</p>
            </td>
        </tr>
        <tr v-show="config.showPageFooter">
            <td>页脚HTML内容</td>
            <td>
                <textarea name="pageFooterHTML" v-model="config.pageFooterHTML" rows="5" maxlength="1000"></textarea>
                <p class="text-sm text-gray-500">页脚显示的HTML内容，支持简单的HTML标签。</p>
            </td>
        </tr>
        <tr>
            <td>浏览器图标</td>
            <td>
                <div v-if="config.faviconFileId > 0">
                    <a :href="'/ui/image/' + config.faviconFileId" target="_blank"><img alt="" :src="'/ui/image/' + config.faviconFileId" style="width:32px;border:1px #ccc solid;"/></a>
                </div>
                <div v-else>
                    <span class="disabled">还没有上传。</span>
                </div>
                <div style="margin-top: 0.8em">
                    <input type="file" name="faviconFile" accept=".png"/>
                </div>
                <p class="text-sm text-gray-500">在用户端浏览器标签栏显示的图标，请使用PNG格式。</p>
            </td>
        </tr>
        <tr>
            <td>Logo</td>
            <td>
                <div v-if="config.logoFileId > 0">
                    <a :href="'/ui/image/' + config.logoFileId" target="_blank"><img :src="'/ui/image/' + config.logoFileId" style="width:32px;border:1px #ccc solid;"/></a>
                </div>
                <div v-else>
                    <span class="disabled">还没有上传。</span>
                </div>
                <div style="margin-top: 0.8em">
                    <input type="file" name="logoFile" accept=".png"/>
                </div>
                <p class="text-sm text-gray-500">显示在用户端系统界面上的Logo图标，请使用PNG格式。</p>
            </td>
        </tr>
	</table>

    <h3>流量统计</h3>
    <table class="w-full border-collapse bg-white shadow-sm rounded-lg overflow-hidden">
        <tr>
            <td class="title">带宽单位</td>
            <td>
                <select name="bandwidthUnit" v-model="config.bandwidthUnit">
                    <option v-for="unit in bandwidthUnits" :value="unit.code">{{unit.name}}</option>
                </select>
                <p class="text-sm text-gray-500">用户端界面显示带宽时使用的单位。</p>
            </td>
        </tr>
        <tr>
            <td>是否显示流量图表</td>
            <td>
                <checkbox name="showTrafficCharts" v-model="config.showTrafficCharts"></checkbox>
                <p class="text-sm text-gray-500">在用户端是否显示流量相关图表和数据。</p>
            </td>
        </tr>
        <tr v-show="config.showTrafficCharts">
            <td>流量图中显示缓存信息</td>
            <td>
                <checkbox name="showCacheInfoInTrafficCharts" v-model="config.showCacheInfoInTrafficCharts"></checkbox>
                <p class="text-sm text-gray-500">在流量图表中显示缓存命中、回源等相关信息。</p>
            </td>
        </tr>
        <tr>
            <td>是否显示带宽图表</td>
            <td>
                <checkbox name="showBandwidthCharts" v-model="config.showBandwidthCharts"></checkbox>
                <p class="text-sm text-gray-500">在用户端是否显示带宽相关图表和数据。</p>
            </td>
        </tr>
        <tr v-show="config.showBandwidthCharts">
            <td>带宽百分位</td>
            <td>
                <input type="number" name="bandwidthPercentile" v-model="config.trafficStats.bandwidthPercentile" min="1" max="100" style="width: 5em"/>
                <p class="text-sm text-gray-500">计算带宽时使用的百分位值，通常为95。</p>
            </td>
        </tr>
        <tr v-show="config.showBandwidthCharts">
            <td>默认带宽周期</td>
            <td>
                <select name="defaultBandwidthDateRange" v-model="config.trafficStats.defaultBandwidthDateRange">
                    <option v-for="range in bandwidthDateRanges" :value="range.code">{{range.name}}</option>
                </select>
                <p class="text-sm text-gray-500">用户端打开带宽图表时默认显示的时间周期。</p>
            </td>
        </tr>
    </table>

    <h3>其他</h3>
    <table class="w-full border-collapse bg-white shadow-sm rounded-lg overflow-hidden">
        <tr>
            <td class="title">时区</td>
            <td>
                <div class="flex flex-wrap items-center gap-4">
                    <div class="mb-4">
                        <select class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white text-gray-900 cursor-pointer" v-model="timeZoneGroupCode">
                            <option v-for="timeZoneGroup in timeZoneGroups" :value="timeZoneGroup.code">{{timeZoneGroup.name}}</option>
                        </select>
                    </div>
                    <div class="mb-4">
                        <select class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white text-gray-900 cursor-pointer" name="timeZone" v-model="config.timeZone">
                            <option v-for="timeZoneLocation in timeZoneLocations" :value="timeZoneLocation.name" v-if="timeZoneLocation.group == timeZoneGroupCode">{{timeZoneLocation.name}} ({{timeZoneLocation.offset}})</option>
                        </select>
                    </div>
                </div>
                <p class="text-sm text-gray-500">用户端显示时间使用的时区。</p>
            </td>
        </tr>
        <tr>
            <td>客户端IP获取Header</td>
            <td>
                <input type="text" name="clientIPHeaderNames" v-model="config.clientIPHeaderNames" maxlength="200" placeholder="X-Forwarded-For, X-Real-IP"/>
                <p class="text-sm text-gray-500">从HTTP请求Header中获取客户端真实IP的Header名称，多个用逗号分隔。</p>
            </td>
        </tr>
        <tr>
            <td>检查CNAME</td>
            <td>
                <checkbox name="checkCNAME" v-model="config.server.checkCNAME"></checkbox>
                <p class="text-sm text-gray-500">用户添加域名时，是否检查CNAME记录是否正确配置。</p>
            </td>
        </tr>
    </table>

	<submit-btn></submit-btn>
</form>
