# LingCDN åŒç«¯å£ä½¿ç”¨æŒ‡å—

## ğŸ¯ åŠŸèƒ½è¯´æ˜

ç°åœ¨ LingCDN æ”¯æŒåŒæ—¶è¿è¡Œä¸¤ä¸ªç«¯å£ï¼š

- **80 ç«¯å£** â†’ ç”¨æˆ·ç«¯ç•Œé¢ï¼ˆCDN ç”¨æˆ·è‡ªåŠ©ç®¡ç†ï¼‰
- **7788 ç«¯å£** â†’ ç®¡ç†ç«¯ç•Œé¢ï¼ˆç³»ç»Ÿç®¡ç†å‘˜ï¼‰

## ğŸ“¦ æ–‡ä»¶ç»“æ„

```
/root/Lingadmin-master/
â”œâ”€â”€ configs/
â”‚   â””â”€â”€ server.yaml          # åŒç«¯å£é…ç½®
â”œâ”€â”€ web/
â”‚   â””â”€â”€ views/
â”‚       â”œâ”€â”€ @default/         # ç®¡ç†ç«¯ç•Œé¢ï¼ˆ7788ç«¯å£ï¼‰
â”‚       â””â”€â”€ @user/            # ç”¨æˆ·ç«¯ç•Œé¢ï¼ˆ80ç«¯å£ï¼‰
â”‚           â”œâ”€â”€ index/        # ç”¨æˆ·ç™»å½•é¡µ
â”‚           â”œâ”€â”€ dashboard/    # ç”¨æˆ·ä»ªè¡¨ç›˜
â”‚           â”œâ”€â”€ domains/      # åŸŸåç®¡ç†
â”‚           â”œâ”€â”€ ssl/          # SSLè¯ä¹¦
â”‚           â”œâ”€â”€ stats/        # ç»Ÿè®¡æ•°æ®
â”‚           â””â”€â”€ profile/      # ä¸ªäººè®¾ç½®
â””â”€â”€ DUAL_PORT_GUIDE.md       # æ¶æ„è®¾è®¡æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¼–è¯‘ç¨‹åº

```bash
cd /root/Lingadmin-master

# æ¸…ç†æ—§æ–‡ä»¶
rm -f ling-admin

# ç¼–è¯‘ï¼ˆå¯ç”¨ç”¨æˆ·ç«¯åŠŸèƒ½ï¼‰
CGO_ENABLED=0 GOOS=linux GOARCH=amd64 \
go build -ldflags "-s -w" -o ling-admin ./cmd/edge-admin

# æ£€æŸ¥
./ling-admin version
```

### 2. å¤åˆ¶é…ç½®æ–‡ä»¶

```bash
# å¤åˆ¶æ–°çš„åŒç«¯å£é…ç½®
cp /root/Lingadmin-master/configs/server.yaml \
   /opt/lingcdn/configs/server.yaml

# å¤åˆ¶ç”¨æˆ·ç«¯ç•Œé¢
cp -r /root/Lingadmin-master/web/views/@user \
      /opt/lingcdn/web/views/@user
```

### 3. å¯åŠ¨æœåŠ¡

```bash
# åœæ­¢æ—§æœåŠ¡
/opt/lingcdn/bin/ling-admin stop

# æ›¿æ¢ç¨‹åº
cp /root/Lingadmin-master/ling-admin /opt/lingcdn/bin/ling-admin

# å¯åŠ¨æ–°æœåŠ¡
/opt/lingcdn/bin/ling-admin start
```

### 4. è®¿é—®æµ‹è¯•

#### ç”¨æˆ·ç«¯ï¼ˆ80ç«¯å£ï¼‰
```bash
# æµè§ˆå™¨è®¿é—®
http://your-server-ip:80

# æˆ–ä½¿ç”¨ curl æµ‹è¯•
curl -I http://localhost:80
```

#### ç®¡ç†ç«¯ï¼ˆ7788ç«¯å£ï¼‰
```bash
# æµè§ˆå™¨è®¿é—®
http://your-server-ip:7788

# æˆ–ä½¿ç”¨ curl æµ‹è¯•
curl -I http://localhost:7788
```

## ğŸ”§ é…ç½®è¯´æ˜

### server.yaml é…ç½®

```yaml
env: prod

http:
  "on": true
  listen:
    - "0.0.0.0:80"      # ç”¨æˆ·ç«¯
    - "0.0.0.0:7788"    # ç®¡ç†ç«¯

https:
  "on": false
  listen: [ "0.0.0.0:443"]
  cert: ""
  key: ""
```

### ç«¯å£è¯´æ˜

| ç«¯å£ | ç”¨é€” | ç”¨æˆ·ç±»å‹ | åŠŸèƒ½ |
|------|------|---------|------|
| 80 | ç”¨æˆ·ç«¯ | CDNç”¨æˆ· | åŸŸåç®¡ç†ã€è¯ä¹¦ç®¡ç†ã€ç»Ÿè®¡æŸ¥çœ‹ã€ä¸ªäººè®¾ç½® |
| 7788 | ç®¡ç†ç«¯ | ç³»ç»Ÿç®¡ç†å‘˜ | ç”¨æˆ·ç®¡ç†ã€èŠ‚ç‚¹ç®¡ç†ã€ç³»ç»Ÿé…ç½®ã€å…¨å±€è®¾ç½® |

## ğŸ“ å¼€å‘è®¡åˆ’

### å·²å®Œæˆ âœ…
- [x] åŒç«¯å£é…ç½®æ”¯æŒ
- [x] ç”¨æˆ·ç«¯ç›®å½•ç»“æ„
- [x] ç”¨æˆ·ç«¯ç™»å½•é¡µé¢
- [x] ç”¨æˆ·ç«¯ä»ªè¡¨ç›˜é¡µé¢

### å¾…å®ç° ğŸš§
- [ ] ç«¯å£è·¯ç”±åˆ†å‘ä¸­é—´ä»¶
- [ ] ç”¨æˆ·ç«¯å®Œæ•´åŠŸèƒ½
  - [ ] åŸŸåç®¡ç†ï¼ˆæ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤ï¼‰
  - [ ] SSLè¯ä¹¦ç®¡ç†
  - [ ] ç»Ÿè®¡æ•°æ®æŸ¥çœ‹
  - [ ] è®¿é—®æ—¥å¿—æŸ¥è¯¢
  - [ ] ä¸ªäººä¿¡æ¯ä¿®æ”¹
- [ ] æƒé™æ§åˆ¶
  - [ ] ç”¨æˆ·åªèƒ½è®¿é—®è‡ªå·±çš„èµ„æº
  - [ ] ç®¡ç†å‘˜å¯ä»¥è®¿é—®æ‰€æœ‰èµ„æº

## ğŸ› å¸¸è§é—®é¢˜

### Q1: 80ç«¯å£è¢«å ç”¨æ€ä¹ˆåŠï¼Ÿ

```bash
# æ–¹æ³•1ï¼šä¿®æ”¹ä¸ºå…¶ä»–ç«¯å£ï¼ˆå¦‚8080ï¼‰
vim /opt/lingcdn/configs/server.yaml
# å°† 0.0.0.0:80 æ”¹ä¸º 0.0.0.0:8080

# æ–¹æ³•2ï¼šåœæ­¢å ç”¨80ç«¯å£çš„æœåŠ¡
netstat -tlnp | grep :80
kill -9 <pid>
```

### Q2: ä¸¤ä¸ªç«¯å£æ˜¾ç¤ºåŒæ ·çš„é¡µé¢ï¼Ÿ

è¿™æ˜¯æ­£å¸¸çš„ï¼Œå› ä¸ºè·¯ç”±åˆ†å‘åŠŸèƒ½è¿˜æœªå®Œå…¨å®ç°ã€‚å½“å‰ç‰ˆæœ¬ä¼šæ˜¾ç¤ºç›¸åŒå†…å®¹ï¼Œéœ€è¦åœ¨åç»­å¼€å‘ä¸­æ·»åŠ ç«¯å£åˆ¤æ–­é€»è¾‘ã€‚

### Q3: å¦‚ä½•å›é€€åˆ°å•ç«¯å£ï¼Ÿ

```bash
# ç¼–è¾‘é…ç½®æ–‡ä»¶
vim /opt/lingcdn/configs/server.yaml

# åªä¿ç•™ä¸€ä¸ªç›‘å¬åœ°å€
http:
  "on": true
  listen: [ "0.0.0.0:7788" ]

# é‡å¯æœåŠ¡
/opt/lingcdn/bin/ling-admin restart
```

## ğŸ“š ä¸‹ä¸€æ­¥

1. å®ç°ç«¯å£è·¯ç”±åˆ†å‘ä¸­é—´ä»¶
2. å®Œå–„ç”¨æˆ·ç«¯åŠŸèƒ½æ¨¡å—
3. æ·»åŠ ç”¨æˆ·æƒé™æ§åˆ¶
4. å®Œå–„æ–‡æ¡£å’Œæµ‹è¯•

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0.0
**æ›´æ–°æ—¶é—´**: 2025-10-31
**é€‚ç”¨ç‰ˆæœ¬**: LingCDN Admin v1.0.11+
